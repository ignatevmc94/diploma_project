# üõí Shop API (Django + DRF)

–£—á–µ–±–Ω—ã–π backend-–ø—Ä–æ–µ–∫—Ç —Ä–æ–∑–Ω–∏—á–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ (–º–∞–≥–∞–∑–∏–Ω–æ–≤), –∫–æ—Ä–∑–∏–Ω—ã, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞, –∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ YAML.

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∞–∑–æ–≤—É—é –ª–æ–≥–∏–∫—É –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞:

- **–ü–æ–∫—É–ø–∞—Ç–µ–ª—å**:
  - —Å–º–æ—Ç—Ä–∏—Ç —Ç–æ–≤–∞—Ä—ã
  - –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É
  - –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–∫–∞–∑
  - –¥–æ–±–∞–≤–ª—è–µ—Ç / —É–¥–∞–ª—è–µ—Ç –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (–∫–æ–Ω—Ç–∞–∫—Ç—ã)

- **–ü–æ—Å—Ç–∞–≤—â–∏–∫ (–º–∞–≥–∞–∑–∏–Ω)**:
  - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏–∑ YAML
  - –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å / –≤—ã–∫–ª—é—á–∞—Ç—å –ø—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤
  - –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ **—Å–≤–æ–∏ –ø–æ–∑–∏—Ü–∏–∏ –≤ –∑–∞–∫–∞–∑–∞—Ö**
  - –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è **—Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤** –≤ –∑–∞–∫–∞–∑–µ

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**:
  - –ø–æ–ª—É—á–∞–µ—Ç email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–∫–∞–∑–µ (—á–µ—Ä–µ–∑ Celery)

---
## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
![–°—Ö–µ–º–∞ –ë–î](Schema_DB.png)

## üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.x
- Django 5.2
- Django REST Framework
- Token Authentication (DRF authtoken)
- Celery + Redis
- SQLite (–≤ —É—á–µ–±–Ω–æ–π –≤–µ—Ä—Å–∏–∏)
- Ruff (–¥–ª—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è –∫ –Ω–æ—Ä–º–∞–º PEP8)
- GitHub Copilot Chat –∏ ChatGPT (–ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–¥–∞)
- Postman (–¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Token Authentication**.

### –ö–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω
–ó–∞–≥–æ–ª–æ–≤–æ–∫:

Authorization: Token <–≤–∞—à_—Ç–æ–∫–µ–Ω>


---

## üë• –†–æ–ª–∏

### –ü–æ–∫—É–ø–∞—Ç–µ–ª—å
- –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–æ–≤–∞—Ä–∞–º–∏, –∫–æ—Ä–∑–∏–Ω–æ–π, –∑–∞–∫–∞–∑–∞–º–∏, –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏

### –ü–æ—Å—Ç–∞–≤—â–∏–∫
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –º–∞–≥–∞–∑–∏–Ω
- –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —ç–Ω–¥–ø–æ–π–Ω—Ç–∞–º `/supplier/...`
- –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–∞—Ö

---

# üìç Endpoints

–ë–∞–∑–æ–≤—ã–π –ø—Ä–µ—Ñ–∏–∫—Å API:

/api/


---

## ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

### `POST /api/register/`

**–û–ø–∏—Å–∞–Ω–∏–µ:** —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Body:**
```json
{
  "username": "vasya",
  "email": "vasya@mail.ru",
  "password": "12345678"
}
```

**Response:**
```json

{
  "status": "user created",
  "username": "vasya"
}
```


## ‚úÖ –õ–æ–≥–∏–Ω

### POST /api/login/
–û–ø–∏—Å–∞–Ω–∏–µ: –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**Body:**
```json
{
  "username": "vasya",
  "password": "12345678"
}
```
**Response:**
```json
{
  "token": "xxxxxxxxxxxxxxxxxxxx"
}
```

## üîÅ –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
### POST /api/password-reset/

**Body:**
```json
{
  "email": "vasya@mail.ru"
}
```

**Response:**
```json
{
  "status": "password reset email sent"
}
```

## üõçÔ∏è –¢–æ–≤–∞—Ä—ã
### üìå –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
### GET /api/products/

–û–ø–∏—Å–∞–Ω–∏–µ: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–æ–≤

**Response (–ø—Ä–∏–º–µ—Ä):**

**Body:**
```json
[
  {
    "id": 1,
    "name": "iPhone XR",
    "category": {"name": "Phones"},
    "product_infos": [
      {
        "id": 10,
        "shop": "–°–≤—è–∑–Ω–æ–π",
        "price": "69990.00",
        "quantity": 3,
        "parameters": [
          {"parameter": {"name": "color"}, "value": "red"}
        ]
      }
    ]
  }
]
```

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
### –ü–æ –º–∞–≥–∞–∑–∏–Ω—É

GET /api/products/?shop=1

### –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
GET /api/products/?category=3

### üìå –î–µ—Ç–∞–ª–∏ —Ç–æ–≤–∞—Ä–∞
GET /api/products/id/

### –ü—Ä–∏–º–µ—Ä:

GET /api/products/1/

## üõí –ö–æ—Ä–∑–∏–Ω–∞

### üìå –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É

GET /api/cart/

Response:
```json
{
  "id": 12,
  "status": "cart",
  "items": [
    {"id": 5, "product_info": 10, "quantity": 2}
  ],
  "total_price": "139980.00",
  "created_at": "2026-01-25T15:00:00Z"
}
```

## ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
POST /api/cart/

**Body:**
```json
{
  "product_info": 10,
  "quantity": 1
}
```

**Response:**
```json
{
  "status": "item added"
}
```

## ‚ö†Ô∏è –ï—Å–ª–∏ –º–∞–≥–∞–∑–∏–Ω –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–∫–∞–∑—ã (is_accepting_orders=False) ‚Äî –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞.

## ‚ùå –£–¥–∞–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
DELETE /api/cart/<item_id>/

**–ü—Ä–∏–º–µ—Ä:**

DELETE /api/cart/5/

**Response:**
```json
{
  "status": "item deleted"
}
```

## üì¶ –ó–∞–∫–∞–∑—ã (–ø–æ–∫—É–ø–∞—Ç–µ–ª—å)
### üßæ –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
POST /api/order/create/

–û–ø–∏—Å–∞–Ω–∏–µ: –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∫–æ—Ä–∑–∏–Ω—É –≤ –∑–∞–∫–∞–∑ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º new

**Response:**
```json
{
  "status": "Order created"
}
```

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑ (–∫–æ–Ω—Ç–∞–∫—Ç –¥–æ—Å—Ç–∞–≤–∫–∏)
POST /api/order/confirm/

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å contact_id:
```json
{
  "contact_id": 1
}
```
–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç –ø—Ä—è–º–æ –≤ –∑–∞–ø—Ä–æ—Å–µ:

```json
{
  "contact": {
    "phone": "88005553535",
    "city": "Moscow",
    "street": "Red Square",
    "house": "1",
    "apartment": "10"
  }
}
```

**Response:**
```json
{
  "status": "order confirmed"
}
```

### –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

* –∑–∞–∫–∞–∑ –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å confirmed

* –≤—Å–µ OrderItem –ø–æ–ª—É—á–∞—é—Ç —Å—Ç–∞—Ç—É—Å confirmed

* –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è Celery-–∑–∞–¥–∞—á–∏:

* –ø–∏—Å—å–º–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—é

* –ø–∏—Å—å–º–æ –∞–¥–º–∏–Ω—É

## üìÑ –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
GET /api/orders/

**Response:**
```json
[
  {
    "id": 1,
    "status": "confirmed",
    "items": [
      {"id": 1, "product_info": 10, "quantity": 1}
    ],
    "total_price": "69990.00",
    "created_at": "2026-01-25T14:11:34Z"
  }
]
```

## üìÑ –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
GET /api/order/(id)/

üìç –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏ (–∞–¥—Ä–µ—Å–∞)

üìå –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

GET /api/contacts/

‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

POST /api/contacts/

**Body:**
```json
{
  "phone": "123456789",
  "city": "NSK",
  "street": "Ippodrom",
  "house": "100",
  "apartment": "12"
}
```
## ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
PATCH /api/contacts/(id)/

## ‚ùå –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
DELETE /api/contacts/(id)/

## üè™ –ü–æ—Å—Ç–∞–≤—â–∏–∫ (Supplier API)
–í—Å–µ supplier endpoints —Ç—Ä–µ–±—É—é—Ç:

* IsAuthenticated

* IsSupplier

## üì• –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ YAML
POST /api/import/
**Body:**
```json
{
  "file_path": "/home/michael/–î–æ–∫—É–º–µ–Ω—Ç—ã/Python Projects/diploma/shop2.yaml"
}
```

**Response:**
```json
{
  "status": "import completed",
  "shop": "Shop2"
}
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞ (–≤–∞–∂–Ω–æ)
* –∏–º–ø–æ—Ä—Ç –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫

* –∏–º–ø–æ—Ä—Ç —Ä–∞–∑—Ä–µ—à—ë–Ω —Ç–æ–ª—å–∫–æ –≤ —Å–≤–æ–π –º–∞–≥–∞–∑–∏–Ω

* –µ—Å–ª–∏ –º–∞–≥–∞–∑–∏–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏–∑ YAML

* –µ—Å–ª–∏ YAML —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è —á—É–∂–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ ‚Äî –∏–º–ø–æ—Ä—Ç –∑–∞–ø—Ä–µ—â—ë–Ω

## üßæ –ó–∞–∫–∞–∑—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
GET /api/supplier/orders/

–û–ø–∏—Å–∞–Ω–∏–µ: –ø–æ—Å—Ç–∞–≤—â–∏–∫ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ç–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–∞—Ö
(–µ—Å–ª–∏ –∑–∞–∫–∞–∑ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–≤–∞—Ä—ã –¥—Ä—É–≥–∏—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤ ‚Äî –æ–Ω–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è)

**Response:**
```json
[
  {
    "id": 2,
    "supplier_status": "confirmed",
    "customer": "vasya",
    "customer_email": "vasya@mail.ru",
    "items": [
      {
        "id": 4,
        "shop": "Shop2",
        "product_name": "iPhone 15 Pro 256GB",
        "quantity": 1,
        "price": "129990.00",
        "total_price": 129990.0,
        "status": "confirmed"
      }
    ],
    "contact": {
      "id": 6,
      "phone": "88005553535",
      "city": "Moscow",
      "street": "red square",
      "house": "100",
      "apartment": null
    },
    "total_price": 129990.0,
    "created_at": "2026-01-25T15:16:27Z"
  }
]
```

## üîÑ –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤
POST /api/supplier/acception/
**Body:**
```json
{
  "is_accepting_orders": true
}
```

**Response:**
```json
{
  "is_accepting_orders": true,
  "message": "supplier is now accepting orders"
}
```

## ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ (–¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞)

GET /api/supplier/orders/<order_id>/status/

–û–ø–∏—Å–∞–Ω–∏–µ: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
(—Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ –µ–≥–æ OrderItem)

**Response:**
```json
{
  "order_id": 2,
  "supplier_status": "confirmed"
}
```

POST /api/supplier/orders/<order_id>/status/

–û–ø–∏—Å–∞–Ω–∏–µ: –ø–æ—Å—Ç–∞–≤—â–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–≤–æ–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ

**Body:**
```json
{
  "status": "done"
}
```

**Response:**
```json
{
  "order_id": 2,
  "supplier_status": "done",
  "updated_items": 1,
  "message": "Supplier items status updated"
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –æ–±—â–∏–π Order.status –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ done —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞ —Å—Ç–∞–ª–∏ done (–≤–∫–ª—é—á–∞—è –¥—Ä—É–≥–∏–µ –º–∞–≥–∞–∑–∏–Ω—ã).
________________________________________

# üß™ Endpoints

## –ü–æ–∫—É–ø–∞—Ç–µ–ª—å

POST /register/

POST /login/ ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω

POST /password-reset/

GET /products/

POST /cart/

GET /cart/

POST /order/create/

POST /contacts/

POST /order/confirm/

GET /orders/

## –ü–æ—Å—Ç–∞–≤—â–∏–∫

POST /import/ 

POST /login/ ‚Üí —Ç–æ–∫–µ–Ω –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞

POST /supplier/acception/ ‚Üí –≤–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤

GET /supplier/orders/

GET /supplier/orders/(id)/status/

POST /supplier/orders/(id)/status/ ‚Üí done

GET /supplier/orders/ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å supplier_status
